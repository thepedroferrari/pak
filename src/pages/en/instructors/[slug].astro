---
import { getCollection } from 'astro:content';
import ContentLayout from '@/layouts/ContentLayout.astro';
import { t } from '@/i18n/ui';

const lang = 'en';

export async function getStaticPaths() {
  const instructors = await getCollection('instructors');
  return instructors.map((instructor) => ({
    params: { slug: instructor.id },
    props: { instructor },
  }));
}

const { instructor } = Astro.props;
const { name, title_en, rank_en, bio_en, location_en, image } = instructor.data;
---

<ContentLayout
  title={name}
  description={bio_en}
  lang={lang}
  breadcrumbs={[
    { label: t(lang, 'nav.home'), href: '/en/' },
    { label: t(lang, 'nav.instructors'), href: '/en/instructors/' },
    { label: name },
  ]}
>
  <div class="not-prose">
    <div class="flex flex-col md:flex-row gap-8">
      <div class="md:w-1/3">
        <div class="aspect-square bg-gray-light rounded-xl overflow-hidden">
          {image ? (
            <img src={image} alt={name} class="w-full h-full object-cover rounded-xl" loading="lazy" />
          ) : (
            <div class="w-full h-full flex items-center justify-center">
              <span class="text-8xl text-gray-medium/30 font-bold">{name.charAt(0)}</span>
            </div>
          )}
        </div>
      </div>
      <div class="md:w-2/3 space-y-4">
        <div>
          <p class="text-gold-dark font-semibold text-lg">{title_en}</p>
          <p class="text-gray-medium">{rank_en}</p>
        </div>
        <div>
          <h3 class="font-bold text-gray-dark mb-1">{t(lang, 'instructors.location')}</h3>
          <p class="text-gray-medium">{location_en}</p>
        </div>
        <div>
          <p class="text-gray-medium leading-relaxed">{bio_en}</p>
        </div>
      </div>
    </div>
  </div>
</ContentLayout>
